# Financial Trading Platform
# Demonstrates: DECIMAL types for financial data, complex audit trails, trading domain
?nsuri: http://www.ModelDrivenEngineering.com/model/v1

BackendConfig:
  project:
    Project:
      name: "TradingPlatformAPI"
      groupId: "com.finance.trading"
      language: JAVA
      framework: SPRING_BOOT
      javaVersion: 17
      springBootVersion: "3.2.0"
  database:
    Database:
      type: POSTGRESQL
      name: "trading_platform_db"
      host: "localhost"
      port: 5432
      tables:
        - Table:
            name: "account_types"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "type_name"
                  type: STRING
                  length: 50
                  unique: true
                  nullable: false
              - Column:
                  name: "description"
                  type: TEXT
              - Column:
                  name: "max_daily_trades"
                  type: INTEGER
              - Column:
                  name: "commission_rate"
                  type: DECIMAL
        - Table:
            name: "trading_accounts"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "account_number"
                  type: STRING
                  length: 50
                  unique: true
                  nullable: false
              - Column:
                  name: "owner_name"
                  type: STRING
                  length: 100
                  nullable: false
              - Column:
                  name: "email"
                  type: STRING
                  length: 100
                  nullable: false
              - Column:
                  name: "cash_balance"
                  type: DECIMAL
                  nullable: false
              - Column:
                  name: "is_active"
                  type: BOOLEAN
              - Column:
                  name: "account_type_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "account_types"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: RESTRICT
              - Column:
                  name: "created_at"
                  type: DATETIME
                  nullable: false
              - Column:
                  name: "updated_at"
                  type: DATETIME
        - Table:
            name: "securities"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "symbol"
                  type: STRING
                  length: 10
                  unique: true
                  nullable: false
              - Column:
                  name: "company_name"
                  type: STRING
                  length: 100
                  nullable: false
              - Column:
                  name: "exchange"
                  type: STRING
                  length: 20
              - Column:
                  name: "sector"
                  type: STRING
                  length: 50
              - Column:
                  name: "market_cap"
                  type: LONG
              - Column:
                  name: "current_price"
                  type: DECIMAL
                  nullable: false
        - Table:
            name: "trade_orders"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "order_type"
                  type: STRING
                  length: 10
                  nullable: false
              - Column:
                  name: "quantity"
                  type: LONG
                  nullable: false
              - Column:
                  name: "price"
                  type: DECIMAL
                  nullable: false
              - Column:
                  name: "status"
                  type: STRING
                  length: 20
              - Column:
                  name: "commission_fee"
                  type: DECIMAL
              - Column:
                  name: "account_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "trading_accounts"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: RESTRICT
              - Column:
                  name: "security_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "securities"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: RESTRICT
              - Column:
                  name: "created_at"
                  type: DATETIME
                  nullable: false
              - Column:
                  name: "updated_at"
                  type: DATETIME
        - Table:
            name: "trade_executions"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "execution_price"
                  type: DECIMAL
                  nullable: false
              - Column:
                  name: "quantity_executed"
                  type: LONG
                  nullable: false
              - Column:
                  name: "execution_fee"
                  type: DECIMAL
              - Column:
                  name: "order_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "trade_orders"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: RESTRICT
              - Column:
                  name: "executed_at"
                  type: DATETIME
                  nullable: false
        - Table:
            name: "portfolio_holdings"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "quantity_held"
                  type: LONG
                  nullable: false
              - Column:
                  name: "average_cost"
                  type: DECIMAL
                  nullable: false
              - Column:
                  name: "current_value"
                  type: DECIMAL
              - Column:
                  name: "unrealized_gain_loss"
                  type: DECIMAL
              - Column:
                  name: "account_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "trading_accounts"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: CASCADE
              - Column:
                  name: "security_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "securities"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: RESTRICT
              - Column:
                  name: "last_updated"
                  type: DATETIME
        - Table:
            name: "account_transactions"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "transaction_type"
                  type: STRING
                  length: 20
                  nullable: false
              - Column:
                  name: "amount"
                  type: DECIMAL
                  nullable: false
              - Column:
                  name: "description"
                  type: TEXT
              - Column:
                  name: "account_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "trading_accounts"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: RESTRICT
              - Column:
                  name: "created_at"
                  type: DATETIME
                  nullable: false
        - Table:
            name: "price_history"
            columns:
              - Column:
                  name: "id"
                  type: INTEGER
                  primary: true
                  nullable: false
              - Column:
                  name: "open_price"
                  type: DECIMAL
              - Column:
                  name: "close_price"
                  type: DECIMAL
              - Column:
                  name: "high_price"
                  type: DECIMAL
              - Column:
                  name: "low_price"
                  type: DECIMAL
              - Column:
                  name: "volume"
                  type: LONG
              - Column:
                  name: "price_date"
                  type: DATE
                  nullable: false
              - Column:
                  name: "security_id"
                  type: INTEGER
                  nullable: false
                  relation:
                    Relation:
                      targetTable: "securities"
                      targetColumn: "id"
                      type: MANY_TO_ONE
                      onDelete: CASCADE
  api:
    Api:
      basePath: "/api/v1"
      routes:
        - Route:
            entity: "trading_accounts"
            methods:
              - CREATE
              - READ
              - UPDATE
              - DELETE
              - LIST
        - Route:
            entity: "securities"
            methods:
              - READ
              - LIST
        - Route:
            entity: "trade_orders"
            methods:
              - CREATE
              - READ
              - UPDATE
              - DELETE
              - LIST
        - Route:
            entity: "trade_executions"
            methods:
              - READ
              - LIST
        - Route:
            entity: "portfolio_holdings"
            methods:
              - READ
              - LIST
        - Route:
            entity: "account_transactions"
            methods:
              - READ
              - LIST
        - Route:
            entity: "price_history"
            methods:
              - READ
              - LIST
